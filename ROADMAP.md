# –ü–ª–∞–Ω –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è VK Travel Bot

## –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è (v1.0.0) - –ó–ê–í–ï–†–®–ï–ù–û ‚úÖ

- –ë–∞–∑–æ–≤—ã–π VK –±–æ—Ç —Å webhook —Å–µ—Ä–≤–µ—Ä–æ–º
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI GPT-4o-mini
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤ –≤ PostgreSQL
- Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ç—É—Ä–∞–≥–µ–Ω—Ç—Å—Ç–≤–∞ "–ü–ª–∞–Ω–µ—Ç–∞"

---

## –§–∞–∑–∞ 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM

### –ó–∞–¥–∞—á–∏:

1. **–í—ã–±–æ—Ä CRM —Å–∏—Å—Ç–µ–º—ã**
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫—É—é CRM –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ (amoCRM, Bitrix24, etc.)
   - –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

2. **–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è CRM**
   - –§–∞–π–ª: `src/services/crmService.js`
   - –ú–µ—Ç–æ–¥—ã:
     - `createLead(leadData)` - —Å–æ–∑–¥–∞–Ω–∏–µ –ª–∏–¥–∞
     - `updateLead(leadId, data)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏–¥–∞
     - `getLead(leadId)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–∏–¥–µ
     - `addNote(leadId, note)` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ –∫ –ª–∏–¥—É

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ª–∏–¥–æ–≤**
   - –ü—Ä–∏ –ø–µ—Ä–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª–∏–¥ –≤ CRM
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å ID –ª–∏–¥–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
   - –û–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç—É—Å –ª–∏–¥–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞

4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
   - –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏ ‚Üí –∑–∞–º–µ—Ç–∫–∏ –≤ CRM
   - –°—Ç–∞—Ç—É—Å—ã –¥–∏–∞–ª–æ–≥–∞ ‚Üí —Å—Ç–∞—Ç—É—Å—ã –ª–∏–¥–∞
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ (–∏–º—è, VK, —Ç–µ–ª–µ—Ñ–æ–Ω)

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:
- –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É `leads` –≤ –ë–î –¥–ª—è —Å–≤—è–∑–∫–∏ peer_id —Å CRM lead_id
- –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ API CRM
- –î–æ–±–∞–≤–∏—Ç—å –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ CRM

---

## –§–∞–∑–∞ 3: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ó–∞–¥–∞—á–∏:

1. **–£–ª—É—á—à–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î**
   - –¢–∞–±–ª–∏—Ü–∞ `users` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö
   - –¢–∞–±–ª–∏—Ü–∞ `leads` - —Å–≤—è–∑—å —Å CRM
   - –¢–∞–±–ª–∏—Ü–∞ `settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
   - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

2. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞—â–µ–Ω–∏–π –∑–∞ –ø–µ—Ä–∏–æ–¥
   - –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ª–∏–¥—ã
   - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - –°—Ä–µ–¥–Ω–∏–π —á–µ–∫

3. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ rate limit

### SQL —Å—Ö–µ–º—ã:
```sql
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  vk_id VARCHAR(255) UNIQUE NOT NULL,
  first_name VARCHAR(255),
  last_name VARCHAR(255),
  phone VARCHAR(50),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE leads (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  crm_lead_id VARCHAR(255),
  status VARCHAR(50),
  destination VARCHAR(255),
  budget INTEGER,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

---

## –§–∞–∑–∞ 4: –£–ª—É—á—à–µ–Ω–∏–µ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ó–∞–¥–∞—á–∏:

1. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
   - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (–≤–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É, –æ—Ç–∫–ª–æ–Ω–∏—Ç—å)
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–∞—Ö –¥–∏–∞–ª–æ–≥–∞
   - –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –¥–æ–ª–≥–æ–º –æ–∂–∏–¥–∞–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞

2. **Telegram –±–æ—Ç –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤**
   - –§–∞–π–ª: `src/services/telegramBot.js`
   - –ö–æ–º–∞–Ω–¥—ã:
     - `/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
     - `/active` - –∞–∫—Ç–∏–≤–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏
     - `/assign <lead_id>` - –≤–∑—è—Ç—å –ª–∏–¥ –≤ —Ä–∞–±–æ—Ç—É

3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö**
   - –ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–ª
   - –ö–ª–∏–µ–Ω—Ç –æ—Å—Ç–∞–≤–∏–ª —Ç–µ–ª–µ—Ñ–æ–Ω
   - –ö–ª–∏–µ–Ω—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç > 1 —á–∞—Å–∞
   - –ö–ª–∏–µ–Ω—Ç –≤–µ—Ä–Ω—É–ª—Å—è –ø–æ—Å–ª–µ –ø–∞—É–∑—ã

### –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
```javascript
{
  text: "üÜï –ù–û–í–´–ô –õ–ò–î...",
  reply_markup: {
    inline_keyboard: [
      [
        { text: "‚úÖ –í–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É", callback_data: "take_lead_123" },
        { text: "‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å", callback_data: "reject_lead_123" }
      ],
      [
        { text: "üëÅ –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é", callback_data: "view_history_123" }
      ]
    ]
  }
}
```

---

## –§–∞–∑–∞ 5: AI –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (Tools)

### –ó–∞–¥–∞—á–∏:

1. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è search_flights**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API –ø–æ–∏—Å–∫–∞ –∞–≤–∏–∞–±–∏–ª–µ—Ç–æ–≤ (Aviasales, Skyscanner)
   - –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
   - –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö —Ü–µ–Ω

2. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è search_hotels**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API –æ—Ç–µ–ª–µ–π (Booking.com, Hotellook)
   - –§–∏–ª—å—Ç—Ä—ã –ø–æ –∑–≤–µ–∑–¥–Ω–æ—Å—Ç–∏, —Ç–∏–ø—É –ø–∏—Ç–∞–Ω–∏—è
   - –í–æ–∑–≤—Ä–∞—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ü–µ–Ω

3. **Function Calling –≤ OpenAI**
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ tools –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ OpenAI
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π AI –∞–≥–µ–Ω—Ç–æ–º
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤

### –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:
```javascript
const tools = [
  {
    type: "function",
    function: {
      name: "search_flights",
      description: "–ü–æ–∏—Å–∫ –∞–≤–∏–∞–±–∏–ª–µ—Ç–æ–≤",
      parameters: {
        type: "object",
        properties: {
          from: { type: "string" },
          to: { type: "string" },
          date: { type: "string" }
        }
      }
    }
  }
];
```

---

## –§–∞–∑–∞ 6: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ò–¥–µ–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ:

1. **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å**
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥

2. **–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**
   - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–∞ —á–µ—Ä–µ–∑ Speech-to-Text
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤

3. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã**
   - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–∞—Å–ø–æ—Ä—Ç–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –±—Ä–æ—à—é—Ä –æ—Ç–µ–ª–µ–π

4. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –†–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–æ–º–ø—Ç–æ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

5. **Webhook –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏**
   - Endpoint –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –¥–∏–∞–ª–æ–≥ —á–µ–ª–æ–≤–µ–∫—É
   - –†–µ–∂–∏–º "–∂–∏–≤–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞"

6. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Sentry –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
   - –õ–æ–≥–∏ –≤ —Ñ–∞–π–ª—ã –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
   - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM (–§–∞–∑–∞ 2)
2. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ë–î (–§–∞–∑–∞ 3)
3. –£–ª—É—á—à–µ–Ω–∏–µ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–§–∞–∑–∞ 4)

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
4. AI Tools –¥–ª—è –ø–æ–∏—Å–∫–∞ (–§–∞–∑–∞ 5)
5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
6. –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å
7. –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
8. A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

- –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD pipeline
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

---

–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: 20.01.2026
–ê–≤—Ç–æ—Ä: AI Assistant + –ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
